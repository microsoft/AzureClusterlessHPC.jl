<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="canonical" href="https://microsoft.github.io/AzureClusterlessHPC.jl/installation/">
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Installation - AzureClusterlessHPC</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Installation";
    var mkdocs_page_input_path = "installation.md";
    var mkdocs_page_url = "/AzureClusterlessHPC.jl/installation/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> AzureClusterlessHPC</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                    </li>
                </ul>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Installation</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#prerequisites">Prerequisites</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#install-julia-package">Install Julia package</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#install-python-dependencies">Install Python dependencies</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#create-azure-storage-and-batch-account">Create Azure Storage and Batch account</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#test-setup">Test setup</a>
    </li>
    </ul>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../quickstart/">Quickstart</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../credentials/">Credentials</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../pool/">Manage pools</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../functioncalls/">Remote function calls</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../broadcasting/">Broadcasting</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../output/">Collect output</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../cleanup/">Clean up</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../faq/">FAQ</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../about/">About</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">AzureClusterlessHPC</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Installation</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/microsoft/AzureClusterlessHPC.jl/edit/master/docs/installation.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="installation-and-setup">Installation and setup</h1>
<p>Using <code>AzureClusterlessHPC</code> requires at the minimum one Azure Batch and one Azure Blob Storage account. Before being able to run the example, follow the instructions from this section to install the package and dependencies, and set up the necessary Azure resources.</p>
<h2 id="prerequisites">Prerequisites</h2>
<ul>
<li>
<p>Ubuntu 18.04/20.04 or Debian 10</p>
</li>
<li>
<p>Julia v1.5 or later</p>
</li>
<li>
<p>Python3 and pip3</p>
</li>
</ul>
<h2 id="install-julia-package">Install Julia package</h2>
<p>Run the following command from an interactive Julia session to install <code>AzureClusterlessHPC.jl</code> (press the <code>]</code> key and then type the command)</p>
<pre><code>] dev https://github.com/microsoft/AzureClusterlessHPC.jl
</code></pre>
<h2 id="install-python-dependencies">Install Python dependencies</h2>
<p>AzureClusterlessHPC requires the Azure software development kits (SDKs) for batch computing, blob storage and common functionalities. Install the required packages via:</p>
<pre><code># Go to AzureClusterlessHPC directory
cd ~/.julia/dev/AzureClusterlessHPC
pip3 install -r pyrequirements.txt
</code></pre>
<p>Next, we need to make sure that Julia is pointed to the correct Python version in which we installed our packages. Run <code>which python3</code> from the terminal and then start a Julia session and run (replace <code>/path/to/python3</code> with the correct path):</p>
<pre><code>using Pkg, PyCall   # run Pkg.add(&quot;PyCall&quot;) is necessary

ENV[&quot;PYTHON&quot;] = &quot;/path/to/python3&quot;
Pkg.build(&quot;PyCall&quot;)
</code></pre>
<h2 id="create-azure-storage-and-batch-account">Create Azure Storage and Batch account</h2>
<p>Using <code>AzureClusterlessHPC.jl</code> requires an Azure Storage and Azure Batch account with AAD authentication. First, install the Azure Command Line Interface (CLI) by running (see <a href="https://docs.microsoft.com/en-us/cli/azure/">here</a> for additional instructions):</p>
<pre><code>curl -sL https://aka.ms/InstallAzureCLIDeb | sudo bash
</code></pre>
<p>Next, log into your Azure account:</p>
<pre><code>az login
</code></pre>
<p>Once you have sucessfully logged in, follow the next steps to create all required accounts and to create a credential file:</p>
<pre><code># Move to AzureClusterlessHPC directory
cd ~/.julia/dev/AzureClusterlessHPC

# Install JSON parsing
sudo apt-get update -y &amp; sudo apt-get install -y jq

# Create batch and storage accounts with given base name and region
./deploy.sh myname southcentralus
</code></pre>
<p>The shell script writes the credentials to <code>/path/to/AzureClusterlessHPC/credentials.json</code>. <strong>Make sure to never check this credential file into git and keep it private!</strong></p>
<h2 id="test-setup">Test setup</h2>
<p>Start a Julia session and set the <code>CREDENTIALS</code> environment variable so that it points to your credential file:</p>
<pre><code># Set path to credential file
using Pkg
ENV[&quot;CREDENTIALS&quot;] = Pkg.dir(&quot;AzureClusterlessHPC&quot;, &quot;credentials.json&quot;)

# Load package
using AzureClusterlessHPC
</code></pre>
<p>If you were able to load the package without any warnings or erros, you're good to go. Proceed to the <a href="https://microsoft.github.io/AzureClusterlessHPC.jl/quickstart/">Quickstart</a> section in the documentation or browse through the <a href="https://github.com/microsoft/AzureClusterlessHPC.jl/tree/main/examples">example notebooks</a>.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../quickstart/" class="btn btn-neutral float-right" title="Quickstart">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href=".." class="btn btn-neutral" title="Home"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright (c) Microsoft Corporation. All rights reserved.</p>
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/microsoft/AzureClusterlessHPC.jl/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href=".." style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../quickstart/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
